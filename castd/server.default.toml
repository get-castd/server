# castd server configuration
# Copy this file to server.toml and adjust values as needed.

[server]
# Port for HTTP server (ignored when using socket)
# Default: 1337
port = 1337

# Default bundle to serve from workspace/
# If not set, bundle must be specified via --bundle flag
# bundle = "my-bundle"

# Unix socket path for reverse proxy (e.g., Caddy, nginx)
# When set, the server listens on this socket instead of a TCP port
# socket = "/var/run/castd.sock"

[extensions]
# Lua extensions to enable from backend/extensions/
# Each entry is a filename without .lua extension
# enabled = ["discount", "checkout", "stock_feed"]

# Maximum execution time per extension in milliseconds
# Default: 100
# timeout_ms = 100

# Route bindings for extensions (when filename differs from route)
# [extensions.routes]
# "/checkout" = "checkout"
# "/contact/send" = "contact_form"

# [mail]
# SMTP configuration for cn.mail.send()
# When 'from' is not set, mail sending is disabled.
# from = "noreply@example.com"
# smtp_host = "localhost"
# smtp_port = 25
# smtp_user = ""
# smtp_pass = ""
# smtp_tls = false

# [volumes]
# Named file storage directories for uploads and managed assets.
# Files are stored on disk; filenames are saved as plain text in the database.
#
# Simple form (path only, defaults: max 10MB, all types accepted):
# uploads = "/var/data/uploads"
#
# Extended form with validation:
# [volumes.uploads]
# path = "/var/data/uploads"
# max_size = "10MB"
# allowed_types = ["image/jpeg", "image/png", "image/webp", "application/pdf"]
